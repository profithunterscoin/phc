[HOWTO] compile altcoin for windows on linux using mxe and mingw
June 04, 2015, 02:45:26 PM

Hello!
In this tutorial I show you how to cross compile altcoin-qt using mxe and mingw.
What is mxe? Well this is set of makefiles allowing you compile an cross environment with needed packages (mingw-w64, qt, boost, etc) without pain.

For example I will compile phc-qt for 32-bit Windows on 64-bit Ubuntu 14.04 LTS, but this method should work with another altcoins.

Step 1.
Firstly we need install cross compile environment.

Install mxe dependencies:
Code:
sudo apt-get install p7zip-full autoconf automake autopoint bash bison bzip2 cmake flex gettext git g++ gperf intltool libffi-dev libtool libltdl-dev libssl-dev libxml-parser-perl make openssl patch perl pkg-config python ruby scons sed unzip wget xz-utils

For 64-bit Ubuntu also install:
Code:
sudo apt-get install g++-multilib libc6-dev-i386

Step 2.

Clone mxe github repo (if you just download zip archive from guthub, mxe may not work):
Code:
cd /mnt
git clone https://github.com/mxe/mxe.git

Our environment will be placed in /mnt/mxe

Step 3.
Now we need compile boost and qt5 for our environment (need a couple of hours for this).
If you compile something using mxe and move mxe directory to another place, then mxe will not work because all what you compile linked statically
Compiling boost will fail if memory of your PC less then 2GB. Making swap partition will fix this.

Compile boost:
Code:
cd /mnt/mxe
make MXE_TARGETS="i686-w64-mingw32.static" boost

Compile qt5:
Code:
make MXE_TARGETS="i686-w64-mingw32.static" qttools

If you need qt4 (for some altcoins):
Code:
make MXE_TARGETS="i686-w64-mingw32.static" qt

mxe automatically determine all dependencies and compile it.

Step 4.
Unfortunately mxe not support berkeley db and miniupnpc so we need compile them manually.

Compiling berkley db:
Download and unpack berkeley db:
Code:
cd /mnt
wget https://fossies.org/linux/misc/db-18.1.32.tar.gz
tar zxvf db-18.1.32.tar.gz

Make bash script for compilation:
Code:
cd /mnt/db-18.1.32
touch compile-db.sh
chmod ugo+x compile-db.sh

Content of compile-db.sh:
Code:
#!/bin/bash
MXE_PATH=/mnt/mxe
sed -i "s/WinIoCtl.h/winioctl.h/g" src/dbinc/win_db.h
mkdir build_mxe
cd build_mxe

CC=$MXE_PATH/usr/bin/i686-w64-mingw32.static-gcc \
CXX=$MXE_PATH/usr/bin/i686-w64-mingw32.static-g++ \
../dist/configure \
  --with-mutex=x86/gcc-assembly \
	--disable-replication \
	--enable-mingw \
	--enable-cxx \
	--host x86 \
	--prefix=$MXE_PATH/usr/i686-w64-mingw32.static

make

make install

Compile:
Code:
./compile-db.sh

Compiling miniupnpc:
Download and unpack miniupnpc:
Code:
cd /mnt
wget http://miniupnp.free.fr/files/miniupnpc-1.6.20120509.tar.gz
tar zxvf miniupnpc-1.6.20120509.tar.gz

Make bash script for compilation:
Code:
cd /mnt/miniupnpc-1.6.20120509
touch compile-m.sh
chmod ugo+x compile-m.sh

Content of compile-m.sh:
Code:
#!/bin/bash
MXE_PATH=/mnt/mxe

CC=$MXE_PATH/usr/bin/i686-w64-mingw32.static-gcc \
AR=$MXE_PATH/usr/bin/i686-w64-mingw32.static-ar \
CFLAGS="-DSTATICLIB -I$MXE_PATH/usr/i686-w64-mingw32.static/include" \
LDFLAGS="-L$MXE_PATH/usr/i686-w64-mingw32.static/lib" \
make libminiupnpc.a

mkdir $MXE_PATH/usr/i686-w64-mingw32.static/include/miniupnpc
cp *.h $MXE_PATH/usr/i686-w64-mingw32.static/include/miniupnpc
cp libminiupnpc.a $MXE_PATH/usr/i686-w64-mingw32.static/lib

Compile:
Code:
./compile-m.sh

Build qrencode
wget http://fukuchi.org/works/qrencode/qrencode-3.4.4.tar.gz
tar -xvf qrencode-3.4.4.tar.gz
cd qrencode-3.4.4
./configure --host=i686-w64-mingw32.static --prefix=/mnt/mxe/usr/i686-w64-mingw32.static --enable-static --disable-shared --without-tools
make
make install

Build Boost:
cd /mnt
wget https://dl.bintray.com/boostorg/release/1.70.0/source/boost_1_70_0.tar.bz2
tar xvjf boost_1_70_0.tar.bz2
cd boost_1_70_0
./bootstrap.sh --prefix=/mnt/mxe/usr/i686-w64-mingw32.static
./b2

Build Openssl
git clone https://github.com/openssl/openssl
cd openssl
./config
make
make install

Step 5.
Yay! Making our environment is done! Now we can compile PHC.

Every new session:
export PATH=/mnt/mxe/usr/bin:$PATH

Download and unpack PHC sources:
Code:
cd /mnt
git clone https://github.com/profithunterscoin/phc.git

Make bash script for compilation:
Code:
cd /mnt/phc
touch compile-phc.sh
chmod ugo+x compile-phc.sh

Content of compile-phc.sh:
Code:
#!/bin/bash
MXE_INCLUDE_PATH=/mnt/mxe/usr/i686-w64-mingw32.static/include
MXE_LIB_PATH=/mnt/mxe/usr/i686-w64-mingw32.static/lib

i686-w64-mingw32.static-qmake-qt5 \
	BOOST_LIB_SUFFIX=-mt \
	BOOST_THREAD_LIB_SUFFIX=_win32-mt \
  BOOST_INCLUDE_PATH=/mnt/boost_1_70_0 \
	BOOST_LIB_PATH=/mnt/boost_1_70_0/stage/lib \
	OPENSSL_INCLUDE_PATH=/mnt/openssl/include \
	OPENSSL_LIB_PATH=/mnt/openssl \
	BDB_INCLUDE_PATH=/mnt/db-18.1.32/include \
	BDB_LIB_PATH=/mnt/db-18.1.32 \
	MINIUPNPC_INCLUDE_PATH=$MXE_INCLUDE_PATH \
	MINIUPNPC_LIB_PATH=$MXE_LIB_PATH \
  SECP256K1_INCLUDE_PATH=/mnt/phc/src/secp256k1/include \
  SECP256K1_LIB_PATH=/mnt/phc/src/secp256k1/.libs \
	QMAKE_LRELEASE=/mnt/mxe/usr/i686-w64-mingw32.static/qt5/bin/lrelease phc-qt.pro

make -f Makefile.Release

Compile:
Code:
./compile-phc.sh

And that all.
Our phc-qt.exe placed in /mnt/phc/release
Hope this help someone

===========================================================
NOTE: NOT WORKING

build/smessage.o:smessage.cpp:(.text$_ZN18SecMsgBatchScannerD1Ev[__ZN18SecMsgBatchScannerD1Ev]+0x25): undefined reference to `leveldb::WriteBatch::Handler::~Handler()'
build/smessage.o:smessage.cpp:(.text$_ZN18SecMsgBatchScannerD0Ev[__ZN18SecMsgBatchScannerD0Ev]+0x21): undefined reference to `leveldb::WriteBatch::Handler::~Handler()'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDBD1Ev[__ZN8SecMsgDBD1Ev]+0xe): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB8TxnBeginEv+0x83): undefined reference to `leveldb::WriteBatch::WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB10WriteSmesgEPhR12SecMsgStored+0x29a): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB10WriteSmesgEPhR12SecMsgStored+0x487): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB10EraseSmesgEPh+0x10d): undefined reference to `leveldb::WriteBatch::Delete(leveldb::Slice const&)'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB10EraseSmesgEPh+0x254): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB7WritePKER6CKeyIDR7CPubKey+0x2bd): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB7WritePKER6CKeyIDR7CPubKey+0x4e7): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZNK8SecMsgDB9ScanBatchERK11CDataStreamPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPb+0xf1): undefined reference to `leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const'
build/smessage.o:smessage.cpp:(.text$_ZNK8SecMsgDB9ScanBatchERK11CDataStreamPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPb+0x138): undefined reference to `leveldb::WriteBatch::Handler::~Handler()'
build/smessage.o:smessage.cpp:(.text$_ZNK8SecMsgDB9ScanBatchERK11CDataStreamPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPb+0x174): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB6ReadPKER6CKeyIDR7CPubKey+0x33e): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB9TxnCommitEv+0x7b): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB9TxnCommitEv+0xe1): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB9ReadSmesgEPhR12SecMsgStored+0x2ea): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB4OpenEPKc+0x10f): undefined reference to `leveldb::Options::Options()'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB4OpenEPKc+0x164): undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'
build/smessage.o:smessage.cpp:(.text$_ZN8SecMsgDB4OpenEPKc+0x1d2): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/smessage.o:smessage.cpp:(.text$_Z22SecureMsgInsertAddressR6CKeyIDR7CPubKey+0x99): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_Z22SecureMsgInsertAddressR6CKeyIDR7CPubKey+0xea): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_Z21SecureMsgGetStoredKeyR6CKeyIDR7CPubKey+0xd3): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_Z18SecureMsgScanBlockR6CBlock+0x145): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_Z18SecureMsgScanBlockR6CBlock+0x217): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/smessage.o:smessage.cpp:(.text$_Z22ScanChainForPublicKeysP11CBlockIndex+0x166): more undefined references to `leveldb::WriteBatch::~WriteBatch()' follow
build/key.o:key.cpp:(.text$_ZNK4CKey11SignCompactERK7uint256RSt6vectorIhSaIhEE+0x7c): undefined reference to `secp256k1_ecdsa_sign_recoverable'
build/key.o:key.cpp:(.text$_ZNK4CKey11SignCompactERK7uint256RSt6vectorIhSaIhEE+0xa2): undefined reference to `secp256k1_ecdsa_recoverable_signature_serialize_compact'
build/key.o:key.cpp:(.text$_ZNK4CKey11SignCompactERK7uint256RSt6vectorIhSaIhEE+0x10c): undefined reference to `secp256k1_ecdsa_recoverable_signature_serialize_compact'
build/main.o:main.cpp:(.text$_ZN5CTxDBD1Ev[__ZN5CTxDBD1Ev]+0xe): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/main.o:main.cpp:(.text$_ZN6CBlock17SetBestChainInnerER5CTxDBP11CBlockIndex+0x52): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/main.o:main.cpp:(.text$_ZN6CBlock12SetBestChainER5CTxDBP11CBlockIndex+0xf10): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/main.o:main.cpp:(.text$_ZN6CChain13RollbackChainEi+0x132): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/main.o:main.cpp:(.text$_Z14LoadBlockIndexv+0xc2): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/rpcmining.o:rpcmining.cpp:(.text$_Z16getblocktemplateRKSt6vectorIN11json_spirit10Value_implINS0_13Config_vectorINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEEESaISA_EEb+0x2385): more undefined references to `leveldb::WriteBatch::~WriteBatch()' follow
build/init.o:init.cpp:(.text$_Z8Shutdownv+0x3d2): undefined reference to `GetPidFile()'
build/instantx.o:instantx.cpp:(.text$_Z20ProcessConsensusVoteP5CNodeR14CConsensusVote+0x983): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/rpcrawtransaction.o:rpcrawtransaction.cpp:(.text$_Z18signrawtransactionRKSt6vectorIN11json_spirit10Value_implINS0_13Config_vectorINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEEESaISA_EEb+0xdff): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/rpcrawtransaction.o:rpcrawtransaction.cpp:(.text$_Z18signrawtransactionRKSt6vectorIN11json_spirit10Value_implINS0_13Config_vectorINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEEEESaISA_EEb+0x4031): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN13CBatchScannerD1Ev[__ZN13CBatchScannerD1Ev]+0x25): undefined reference to `leveldb::WriteBatch::Handler::~Handler()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN13CBatchScannerD0Ev[__ZN13CBatchScannerD0Ev]+0x21): undefined reference to `leveldb::WriteBatch::Handler::~Handler()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB8TxnBeginEv+0x8a): undefined reference to `leveldb::WriteBatch::WriteBatch()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZNK5CTxDB9ScanBatchERK11CDataStreamPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPb+0x130): undefined reference to `leveldb::WriteBatch::Iterate(leveldb::WriteBatch::Handler*) const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZNK5CTxDB9ScanBatchERK11CDataStreamPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPb+0x169): undefined reference to `leveldb::WriteBatch::Handler::~Handler()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZNK5CTxDB9ScanBatchERK11CDataStreamPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPb+0x233): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7CBigNumEEbRKT_RKT0_[__ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7CBigNumEEbRKT_RKT0_]+0x282): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7CBigNumEEbRKT_RKT0_[__ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7CBigNumEEbRKT_RKT0_]+0x5f7): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E15CDiskBlockIndexEEbRKT_RKT0_[__ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E15CDiskBlockIndexEEbRKT_RKT0_]+0x5e3): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E15CDiskBlockIndexEEbRKT_RKT0_[__ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E15CDiskBlockIndexEEbRKT_RKT0_]+0x917): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E8CTxIndexEEbRKT_RKT0_[__ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E8CTxIndexEEbRKT_RKT0_]+0x28f): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E8CTxIndexEEbRKT_RKT0_[__ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E8CTxIndexEEbRKT_RKT0_]+0x547): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256EEbRKT_RKT0_[__ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256EEbRKT_RKT0_]+0x1ea): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256EEbRKT_RKT0_[__ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256EEbRKT_RKT0_]+0x457): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint160ESt6vectorI7uint256SaISB_EEEEbRKT_RKT0_[__ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint160ESt6vectorI7uint256SaISB_EEEEbRKT_RKT0_]+0x27a): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint160ESt6vectorI7uint256SaISB_EEEEbRKT_RKT0_[__ZN5CTxDB5WriteISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint160ESt6vectorI7uint256SaISB_EEEEbRKT_RKT0_]+0x4e7): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEiEEbRKT_RKT0_[__ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEiEEbRKT_RKT0_]+0x1f8): undefined reference to `leveldb::WriteBatch::Put(leveldb::Slice const&, leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEiEEbRKT_RKT0_[__ZN5CTxDB5WriteINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEiEEbRKT_RKT0_]+0x467): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_Z15init_blockindexRN7leveldb7OptionsEb+0x891): undefined reference to `leveldb::DB::Open(leveldb::Options const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, leveldb::DB**)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_Z15init_blockindexRN7leveldb7OptionsEb+0x8e9): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB9TxnCommitEv+0x7c): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB9TxnCommitEv+0xd6): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB4ReadISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E8CTxIndexEEbRKT_RT0_[__ZN5CTxDB4ReadISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint256E8CTxIndexEEbRKT_RT0_]+0x571): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB17ReadHashBestChainER7uint256+0x437): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB4ReadINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEiEEbRKT_RT0_[__ZN5CTxDB4ReadINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEiEEbRKT_RT0_]+0x3ba): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDBC2EPKc+0x66): undefined reference to `leveldb::Options::Options()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDBC2EPKc+0x107): undefined reference to `leveldb::Options::Options()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDBC2EPKc+0x171): undefined reference to `leveldb::NewLRUCache(unsigned int)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDBC2EPKc+0x180): undefined reference to `leveldb::NewBloomFilterPolicy(int)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDBC2EPKc+0x1d8): undefined reference to `leveldb::NewBloomFilterPolicy(int)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDBC2EPKc+0x651): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB4ReadISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint160ESt6vectorI7uint256SaISB_EEEEbRKT_RT0_[__ZN5CTxDB4ReadISt4pairINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7uint160ESt6vectorI7uint256SaISB_EEEEbRKT_RT0_]+0x550): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB12EraseTxIndexERK12CTransaction+0x20f): undefined reference to `leveldb::WriteBatch::Delete(leveldb::Slice const&)'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB4ReadINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7CBigNumEEbRKT_RT0_[__ZN5CTxDB4ReadINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE7CBigNumEEbRKT_RT0_]+0x59a): undefined reference to `leveldb::Status::ToString[abi:cxx11]() const'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB14LoadBlockIndexEv+0x1595): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/txdb-leveldb.o:txdb-leveldb.cpp:(.text$_ZN5CTxDB14LoadBlockIndexEv+0x2d95): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/miner.o:miner.cpp:(.text$_Z21CreateNewBlockWithKeyR11CReserveKeyP7CWallet+0x12bc): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/miner.o:miner.cpp:(.text$_Z21CreateNewBlockWithKeyR11CReserveKeyP7CWallet+0x1ea6): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/miner.o:miner.cpp:(.text$_Z14CreateNewBlockR11CReserveKeybPx+0x1619): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/miner.o:miner.cpp:(.text$_Z14CreateNewBlockR11CReserveKeybPx+0x2409): more undefined references to `leveldb::WriteBatch::~WriteBatch()' follow
build/pubkey.o:pubkey.cpp:(.text$_ZN7CPubKey14RecoverCompactERK7uint256RKSt6vectorIhSaIhEE+0x59): undefined reference to `secp256k1_ecdsa_recoverable_signature_parse_compact'
build/pubkey.o:pubkey.cpp:(.text$_ZN7CPubKey14RecoverCompactERK7uint256RKSt6vectorIhSaIhEE+0x81): undefined reference to `secp256k1_ecdsa_recover'
build/transactiondesc.o:transactiondesc.cpp:(.text$_ZN15TransactionDesc6toHTMLEP7CWalletR9CWalletTxP17TransactionRecordi+0x30dd): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
build/transactiondesc.o:transactiondesc.cpp:(.text$_ZN15TransactionDesc6toHTMLEP7CWalletR9CWalletTxP17TransactionRecordi+0x63f0): undefined reference to `leveldb::WriteBatch::~WriteBatch()'
collect2: error: ld returned 1 exit status

===================

https://github.com/CoinMonkey/mxe

https://github.com/abhisit/mxe

===================

i'm having trouble with building a coin using secp256k1

Code:
libsecp256k1_la-secp256k1.o: file not recognized: File format not recognized

generally it seems like i have success with secp256k1 but it is not recognized on qt build.

i've tried a variety of things including

Code:
./autogen.sh
./configure --host=i686-w64-mingw32.static
make

fails on qt build

and
Code:
./configure --host=i686-w64-mingw32.static --prefix=/home/mxe/mxe/usr/i686-w64-mingw32.static --enable-static --disable-shared

gives error during configure
Code:
./configure: line 12234: SECP_64BIT_ASM_CHECK: command not found
./configure: line 12263: SECP_INT128_CHECK: command not found
./configure: line 12291: SECP_INT128_CHECK: command not found
./configure: line 12316: SECP_GMP_CHECK: command not found
./configure: line 12422: SECP_OPENSSL_CHECK: command not found

also fails on qt build



===========================================================
Quote from: main.h on June 04, 2015, 02:45:26 PM

Compile boost:
Code:
cd /mnt/mxe
make MXE_TARGETS="i686-w64-mingw32.static" boost

if error message:
Missing requirement: libtool
than
Code:
sudo apt-get install libtool-bin

Quote from: main.h on June 04, 2015, 02:45:26 PM

Step 3.
Now we need compile boost and qt5 for our environment (need a couple of hours for this).

less than one hour if i5+SSD

=======================================================


If you have levelDB issue (libleveldb.a / libmemenv.a), plz follow below instruction.

Code:
cd %coin_folder%/src/leveldb
TARGET_OS=NATIVE_WINDOWS make libleveldb.a libmemenv.a CC=/mnt/mxe/usr/bin/i686-w64-mingw32.static-gcc CXX=/mnt/mxe/usr/bin/i686-w64-mingw32.static-g++
make


https://bitcointalk.org/index.php?topic=1080289.0

=============



cd src/leveldb
make clean
export PATH=/mnt/mxe/usr/bin:$PATH
export PATH=$MXEPATH/bin:$PATH
TARGET_OS=NATIVE_WINDOWS make -j4 CC=i686-w64-mingw32.static-gcc CXX=i686-w64-
mingw32.static-g++ libleveldb.a libmemenv.a
cd ../..
chmod 775 * -R

cd src/secp256k1
make clean
export PATH=/mnt/mxe/usr/bin:$PATH
export PATH=$MXEPATH/bin:$PATH
chmod 775 * -R
./autogen.sh
./configure --host=i686-w64-mingw32.static --enable-static --disable-shared --enable-modulerecovery
make -j4

cd ../..
export PATH=/mnt/mxe/usr/bin:$PATH
export PATH=$MXEPATH/bin:$PATH
/mnt/mxe/usr/i686-w64-mingw32.static/qt5/bin/qmake phc-qt.pro
make -j4


===========================================================


Gavin's notes on getting gitian builds up and running using KVM:

These instructions distilled from:
  https://help.ubuntu.com/community/KVM/Installation
... see there for complete details.

You need the right hardware: you need a 64-bit-capable CPU with hardware virtualization support (Intel VT-x or AMD-V). Not all modern CPUs support hardware virtualization.

You probably need to enable hardware virtualization in your machine's BIOS.

You need to be running a recent version of 64-bit-Ubuntu, and you need to install several prerequisites:
  sudo apt-get install ruby apache2 git apt-cacher-ng python-vm-builder qemu-kvm

Sanity checks:
  sudo service apt-cacher-ng status   # Should return apt-cacher-ng is running
  ls -l /dev/kvm   # Should show a /dev/kvm device


TESTED on Ubuntu 12

Once you've got the right hardware and software:

    git clone http://github.com/profithunterscoin/phc/phc.git
    git clone git://github.com/devrandom/gitian-builder.git
    mkdir gitian-builder/inputs
    cd gitian-builder/inputs
    # Inputs for Linux and Win32:
    wget -O miniupnpc-1.6.tar.gz 'http://miniupnp.tuxfamily.org/files/download.php?file=miniupnpc-1.6.tar.gz'
    wget 'http://fukuchi.org/works/qrencode/qrencode-3.2.0.tar.bz2'
    # Inputs for Win32: (Linux has packages for these)
    wget 'https://downloads.sourceforge.net/project/boost/boost/1.50.0/boost_1_50_0.tar.bz2'
    wget 'http://www.openssl.org/source/openssl-1.0.1c.tar.gz'
    wget 'http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz'
    wget 'https://downloads.sourceforge.net/project/libpng/zlib/1.2.6/zlib-1.2.6.tar.gz'
    wget 'https://downloads.sourceforge.net/project/libpng/libpng15/older-releases/1.5.9/libpng-1.5.9.tar.gz'
    wget 'http://releases.qt-project.org/qt4/source/qt-everywhere-opensource-src-4.8.3.tar.gz'
    cd ../..

    cd gitian-builder
    bin/make-base-vm --arch i386 --suite trusty --lxc
    bin/make-base-vm --arch amd64 --suite trusty --lxc
    cd ..

    # Build Linux release:
    cd phc
    git pull

    cd ../gitian-builder
    git pull
	mv base-trusty-i386 base-trusty-i386.qcow2
	mv base-trusty-amd64 base-trusty-amd64.qcow2
    ./bin/gbuild --commit phc=HEAD ../phc/contrib/gitian-descriptors/gitian.yml

    # Build Win32 dependencies: (only needs to be done once, or when dependency versions change)
    ./bin/gbuild --commit phc=HEAD ../phc/contrib/gitian-descriptors/boost-win32.yml
    ./bin/gbuild --commit phc=HEAD ../phc/contrib/gitian-descriptors/deps-win32.yml
    ./bin/gbuild --commit phc=HEAD ../phc/contrib/gitian-descriptors/qt-win32.yml

    # Build Win32 release:
    ./bin/gbuild --commit phc=HEAD ../phc/contrib/gitian-descriptors/gitian-win32.yml

---------------------

gitian-builder now also supports building using LXC. See
  https://help.ubuntu.com/12.04/serverguide/lxc.html
... for how to get LXC up and running under Ubuntu.

If your main machine is a 64-bit Mac or PC with a few gigabytes of memory
and at least 10 gigabytes of free disk space, you can gitian-build using
LXC running inside a virtual machine.

Here's a description of Gavin's setup on OSX 10.6:

1. Download and install VirtualBox from https://www.virtualbox.org/

2. Download the 64-bit Ubuntu Desktop 12.04 LTS .iso CD image from
  http://www.ubuntu.com/

3. Run VirtualBox and create a new virtual machine, using the
  Ubuntu .iso (see the VirtualBox documentation for details).
  Create it with at least 2 gigabytes of memory and a disk
  that is at least 20 gigabytes big.

4. Inside the running Ubuntu desktop, install:
  sudo apt-get install debootstrap lxc ruby apache2 git apt-cacher-ng python-vm-builder

5. Still inside Ubuntu, tell gitian-builder to use LXC, then follow the "Once you've got the right
  hardware and software" instructions above:
  export USE_LXC=1
  git clone http://github.com/profithunterscoin/phc/phc.git
  ... etc
